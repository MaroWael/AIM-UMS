<!--
student.fxml - Student panel UI (Enhanced Modern Design)
Provides tabs for viewing courses, enrolling, taking quizzes, and viewing grades
-->

<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.ComboBox?>
<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.ums.system.controller.StudentController"
            prefHeight="700" prefWidth="1000"
            styleClass="student-root"
            stylesheets="@student.css">

    <!-- Top: Enhanced Header with Gradient -->
    <top>
        <VBox styleClass="student-header">
            <padding>
                <Insets top="20" right="25" bottom="20" left="25"/>
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label fx:id="welcomeLabel" text="Welcome, Student!" styleClass="student-welcome-label"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="ðŸšª Logout" onAction="#handleLogout" styleClass="student-logout-button"/>
            </HBox>

            <Label fx:id="userInfoLabel" text="Role: Student  ID: -  Level: -" styleClass="student-user-info">
                <VBox.margin>
                    <Insets top="8"/>
                </VBox.margin>
            </Label>
        </VBox>
    </top>

    <!-- Center: Enhanced Tab Pane with Modern Styling -->
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="student-tab-pane">

            <!-- AVAILABLE COURSES TAB -->
            <Tab text="ðŸ“š Available Courses">
                <VBox spacing="20" styleClass="student-content-section">

                    <Label text="ðŸ“š Available Courses" styleClass="student-section-title"/>

                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="student-info-banner-blue">
                        <Label text="ðŸ’¡ Browse and enroll in available courses" styleClass="info-text-blue"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#loadAvailableCourses" styleClass="student-refresh-button"/>
                        <Button text="âœ… Enroll in Selected" onAction="#handleEnrollCourse" styleClass="student-enroll-button"/>
                    </HBox>

                    <TableView fx:id="availableCoursesTable" VBox.vgrow="ALWAYS" styleClass="student-table, student-table-blue">
                        <columns>
                            <TableColumn fx:id="availCourseCodeColumn" text="Code" prefWidth="100"/>
                            <TableColumn fx:id="availCourseNameColumn" text="Course Name" prefWidth="250"/>
                            <TableColumn fx:id="availCourseLevelColumn" text="Level" prefWidth="80"/>
                            <TableColumn fx:id="availCourseMajorColumn" text="Major" prefWidth="180"/>
                            <TableColumn fx:id="availCourseInstructorColumn" text="Instructor" prefWidth="150"/>
                            <TableColumn fx:id="availCourseLectureTimeColumn" text="Lecture Time" prefWidth="150"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- MY COURSES TAB -->
            <Tab text="ðŸ“– My Courses">
                <VBox spacing="20" styleClass="student-content-section">

                    <Label text="ðŸ“– My Enrolled Courses" styleClass="student-section-title"/>

                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="student-info-banner-orange">
                        <Label text="ðŸ“‹ Courses you are currently enrolled in" styleClass="info-text-orange"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ”„ Refresh" onAction="#loadMyCourses" styleClass="student-refresh-button-orange"/>
                        <Button text="âŒ Drop Selected" onAction="#handleDropCourse" styleClass="student-drop-button"/>
                    </HBox>

                    <TableView fx:id="myCoursesTable" VBox.vgrow="ALWAYS" styleClass="student-table, student-table-orange">
                        <columns>
                            <TableColumn fx:id="myCourseCodeColumn" text="Code" prefWidth="100"/>
                            <TableColumn fx:id="myCourseNameColumn" text="Course Name" prefWidth="250"/>
                            <TableColumn fx:id="myCourseLevelColumn" text="Level" prefWidth="80"/>
                            <TableColumn fx:id="myCourseMajorColumn" text="Major" prefWidth="180"/>
                            <TableColumn fx:id="myCourseInstructorColumn" text="Instructor" prefWidth="150"/>
                            <TableColumn fx:id="myCourseLectureTimeColumn" text="Lecture Time" prefWidth="150"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- QUIZZES TAB -->
            <Tab text="ðŸ“ Quizzes">
                <VBox spacing="20" styleClass="student-content-section">

                    <Label text="ðŸ“ Available Quizzes" styleClass="student-section-title"/>

                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="student-info-banner-purple">
                        <Label text="ðŸŽ¯ Select Course:" styleClass="info-text-purple"/>
                        <ComboBox fx:id="quizCourseCombo" prefWidth="320" promptText="Choose a course..." styleClass="student-combo-box"/>
                        <Button text="ðŸ” Load Quizzes" onAction="#handleLoadQuizzes" styleClass="student-load-quiz-button"/>
                        <Button text="ðŸ‘ï¸ View All Quizzes" onAction="#handleViewAllQuizzes" styleClass="student-view-all-button"/>
                    </HBox>

                    <VBox spacing="15" VBox.vgrow="ALWAYS">
                        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="student-info-banner-yellow">
                            <Label text="ðŸ“‹ Available Quizzes" styleClass="info-text-yellow"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸš€ Take Selected Quiz" onAction="#handleTakeQuiz" styleClass="student-take-quiz-button"/>
                        </HBox>

                        <TableView fx:id="quizzesTable" VBox.vgrow="ALWAYS" styleClass="student-table, student-table-purple">
                            <columns>
                                <TableColumn fx:id="quizIdColumn" text="Quiz ID" prefWidth="80"/>
                                <TableColumn fx:id="quizTitleColumn" text="Quiz Title" prefWidth="300"/>
                                <TableColumn fx:id="quizCourseColumn" text="Course Code" prefWidth="120"/>
                                <TableColumn fx:id="quizCourseNameColumn" text="Course Name" prefWidth="250"/>
                                <TableColumn fx:id="quizQuestionsColumn" text="Total Questions" prefWidth="130"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- MY GRADES TAB -->
            <Tab text="â­ My Grades">
                <VBox spacing="20" styleClass="student-content-section">

                    <Label text="â­ My Quiz Results" styleClass="student-section-title"/>

                    <!-- Enhanced Average Score Card -->
                    <HBox spacing="15" alignment="CENTER_LEFT" styleClass="student-info-banner-green">
                        <Label text="ðŸ“Š" styleClass="performance-icon"/>
                        <VBox spacing="3">
                            <Label text="Your Performance" styleClass="performance-label-title"/>
                            <Label fx:id="averageScoreLabel" text="Average Score: N/A" styleClass="performance-label-score"/>
                        </VBox>
                    </HBox>

                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="student-info-banner-green-light">
                        <Label text="ðŸ“ˆ All your quiz results and grades" styleClass="info-text-green"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="ðŸ“„ Generate Report (PDF)" onAction="#handleGenerateReport" styleClass="student-generate-report-button"/>
                        <Button text="ðŸ”„ Refresh" onAction="#loadMyGrades" styleClass="student-refresh-button-green"/>
                        <Button text="ðŸ” View Details" onAction="#handleViewGradeDetails" styleClass="student-view-details-button"/>
                    </HBox>

                    <TableView fx:id="gradesTable" VBox.vgrow="ALWAYS" styleClass="student-table, student-table-green">
                        <columns>
                            <TableColumn fx:id="gradeQuizTitleColumn" text="Quiz Title" prefWidth="250"/>
                            <TableColumn fx:id="gradeCourseColumn" text="Course" prefWidth="200"/>
                            <TableColumn fx:id="gradeScoreColumn" text="Score (%)" prefWidth="100"/>
                            <TableColumn fx:id="gradeTotalQuestionsColumn" text="Total Questions" prefWidth="120"/>
                            <TableColumn fx:id="gradeAnswersColumn" text="Correct Answers" prefWidth="120"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>
