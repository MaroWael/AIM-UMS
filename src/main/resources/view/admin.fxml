<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<!--
admin.fxml - Admin panel UI
Provides tabs for managing courses, users, students, and instructors
-->

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.ums.system.controller.AdminController"
            prefHeight="700" prefWidth="1000"
            style="-fx-background-color: #f5f5f5;">

    <!-- Top: Header -->
    <top>
        <VBox style="-fx-background-color: #2193b0;">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label fx:id="welcomeLabel" text="Welcome, Admin!" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="Logout" onAction="#handleLogout" style="-fx-background-color: white; -fx-text-fill: #2193b0; -fx-font-weight: bold; -fx-padding: 8 20; -fx-cursor: hand;"/>
            </HBox>

            <Label fx:id="userInfoLabel" text="Role: Admin | ID: - | Email: -" style="-fx-text-fill: white; -fx-font-size: 12px;">
                <VBox.margin>
                    <Insets top="5"/>
                </VBox.margin>
            </Label>
        </VBox>
    </top>

    <!-- Center: Tab Pane -->
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-padding: 10;">

            <!-- COURSES TAB -->
            <Tab text="Courses">
                <VBox spacing="15" style="-fx-padding: 20;">

                    <!-- Title -->
                    <Label text="Course Management" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                    <!-- Create Course Form -->
                    <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 5;">
                        <Label text="Create New Course" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                            </columnConstraints>

                            <TextField fx:id="courseCodeField" promptText="Course Code" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <TextField fx:id="courseNameField" promptText="Course Name" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                            <ComboBox fx:id="courseMajorCombo" promptText="Select Major" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                            <TextField fx:id="courseLevelField" promptText="Level (1-4)" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                            <TextField fx:id="courseLectureTimeField" promptText="Lecture Time" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                            <ComboBox fx:id="courseInstructorCombo" promptText="Select Instructor" prefWidth="200" GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.columnSpan="2"/>
                            <Button text="Create Course" onAction="#handleCreateCourse" style="-fx-background-color: #2193b0; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                        </GridPane>
                    </VBox>

                    <!-- Courses Table -->
                    <VBox spacing="10" VBox.vgrow="ALWAYS">
                        <HBox spacing="10">
                            <Label text="All Courses" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Refresh" onAction="#loadAllCourses" style="-fx-cursor: hand;"/>
                            <Button text="Delete Selected" onAction="#handleDeleteCourse" style="-fx-background-color: #d32f2f; -fx-text-fill: white; -fx-cursor: hand;"/>
                        </HBox>

                        <TableView fx:id="coursesTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="courseCodeColumn" text="Code" prefWidth="80"/>
                                <TableColumn fx:id="courseNameColumn" text="Course Name" prefWidth="200"/>
                                <TableColumn fx:id="courseLevelColumn" text="Level" prefWidth="60"/>
                                <TableColumn fx:id="courseMajorColumn" text="Major" prefWidth="150"/>
                                <TableColumn fx:id="courseLectureTimeColumn" text="Lecture Time" prefWidth="150"/>
                                <TableColumn fx:id="courseInstructorColumn" text="Instructor" prefWidth="150"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- USERS TAB -->
            <Tab text="Users">
                <VBox spacing="15" style="-fx-padding: 20;">

                    <Label text="User Management" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                    <!-- Create User Form -->
                    <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 5;">
                        <Label text="Create New User" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

                        <!-- User Type Selection -->
                        <HBox spacing="10">
                            <Label text="User Type:" style="-fx-font-size: 12px; -fx-min-width: 80;"/>
                            <ComboBox fx:id="userTypeCombo" prefWidth="120"/>
                        </HBox>

                        <!-- Common Fields -->
                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="34"/>
                            </columnConstraints>

                            <TextField fx:id="userNameField" promptText="Full Name" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <TextField fx:id="userEmailField" promptText="Email" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                            <PasswordField fx:id="userPasswordField" promptText="Password" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        </GridPane>

                        <!-- Dynamic Fields for Student -->
                        <GridPane fx:id="studentFieldsPane" hgap="10" vgap="10" visible="false" managed="false">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                            </columnConstraints>

                            <TextField fx:id="studentLevelField" promptText="Level (1-4)" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <ComboBox fx:id="studentMajorCombo" promptText="Select Major" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                            <ComboBox fx:id="studentDepartmentCombo" promptText="Department" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        </GridPane>

                        <!-- Dynamic Fields for Instructor -->
                        <HBox fx:id="instructorFieldsPane" spacing="10" visible="false" managed="false">
                            <Label text="Department:" style="-fx-font-size: 12px; -fx-min-width: 80;"/>
                            <ComboBox fx:id="instructorDepartmentCombo" promptText="Select Department" prefWidth="200"/>
                        </HBox>

                        <!-- Create Button -->
                        <HBox spacing="10" alignment="CENTER_RIGHT">
                            <Button text="Create User" onAction="#handleCreateUser" style="-fx-background-color: #2193b0; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 10 30;"/>
                        </HBox>
                    </VBox>

                    <!-- Users Table -->
                    <VBox spacing="10" VBox.vgrow="ALWAYS">
                        <HBox spacing="10">
                            <Label text="All Users" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Refresh" onAction="#loadAllUsers" style="-fx-cursor: hand;"/>
                            <Button text="Delete Selected" onAction="#handleDeleteUser" style="-fx-background-color: #d32f2f; -fx-text-fill: white; -fx-cursor: hand;"/>
                        </HBox>

                        <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="userIdColumn" text="ID" prefWidth="50"/>
                                <TableColumn fx:id="userNameColumn" text="Name" prefWidth="250"/>
                                <TableColumn fx:id="userEmailColumn" text="Email" prefWidth="300"/>
                                <TableColumn fx:id="userRoleColumn" text="Role" prefWidth="150"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- STUDENTS TAB -->
            <Tab text="Students">
                <VBox spacing="15" style="-fx-padding: 20;">

                    <Label text="Student Management" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                    <!-- Students Table -->
                    <VBox spacing="10" VBox.vgrow="ALWAYS">
                        <HBox spacing="10">
                            <Label text="All Students" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Refresh" onAction="#loadAllStudents" style="-fx-cursor: hand;"/>
                            <Button text="Update Level" onAction="#handleUpdateStudentLevel" style="-fx-background-color: #2193b0; -fx-text-fill: white; -fx-cursor: hand;"/>
                        </HBox>

                        <TableView fx:id="studentsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="studentIdColumn" text="ID" prefWidth="50"/>
                                <TableColumn fx:id="studentNameColumn" text="Name" prefWidth="300"/>
                                <TableColumn fx:id="studentEmailColumn" text="Email" prefWidth="350"/>
                                <TableColumn fx:id="studentLevelColumn" text="Level" prefWidth="150"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- INSTRUCTORS TAB -->
            <Tab text="Instructors">
                <VBox spacing="15" style="-fx-padding: 20;">

                    <Label text="Instructor Management" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                    <!-- Instructors Table -->
                    <VBox spacing="10" VBox.vgrow="ALWAYS">
                        <HBox spacing="10">
                            <Label text="All Instructors" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Refresh" onAction="#loadAllInstructors" style="-fx-cursor: hand;"/>
                        </HBox>

                        <TableView fx:id="instructorsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="instructorIdColumn" text="ID" prefWidth="50"/>
                                <TableColumn fx:id="instructorNameColumn" text="Name" prefWidth="300"/>
                                <TableColumn fx:id="instructorEmailColumn" text="Email" prefWidth="350"/>
                                <TableColumn fx:id="instructorDeptColumn" text="Department" prefWidth="200"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>
