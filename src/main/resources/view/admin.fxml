<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<!--
admin.fxml - Admin panel UI
Provides tabs for managing courses, users, students, and instructors
Enhanced UI with modern design
-->

<?import java.lang.String?>
<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.ums.system.controller.AdminController"
            prefHeight="750" prefWidth="1200"
            style="-fx-background-color: linear-gradient(to bottom, #f8f9fa, #e9ecef);">

    <!-- Top: Header -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #667eea 0%, #764ba2 100%); -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 10, 0, 0, 3);">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30"/>
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label fx:id="welcomeLabel" text="ðŸŽ“ Welcome, Admin!" style="-fx-text-fill: white; -fx-font-size: 26px; -fx-font-weight: bold; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 5, 0, 0, 1);"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="ðŸšª Logout" onAction="#handleLogout"
                        style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-font-weight: bold; -fx-padding: 10 25; -fx-cursor: hand; -fx-background-radius: 25; -fx-font-size: 13px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);">
                    <font>
                        <Font name="System Bold" size="13"/>
                    </font>
                </Button>
            </HBox>

            <Label fx:id="userInfoLabel" text="Role: Admin  |  ID: -  |  Email: -"
                   style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 13px;">
                <VBox.margin>
                    <Insets top="8"/>
                </VBox.margin>
                <font>
                    <Font name="System" size="13"/>
                </font>
            </Label>
        </VBox>
    </top>

    <!-- Center: Tab Pane -->
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-padding: 15; -fx-background-color: transparent;">

            <!-- COURSES TAB -->
            <Tab text="ðŸ“š Courses">
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: transparent;">

                    <!-- Title -->
                    <Label text="ðŸ“š Course Management" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2d3748;">
                        <font>
                            <Font name="System Bold" size="22"/>
                        </font>
                    </Label>

                    <!-- Create Course Form -->
                    <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 3);">
                        <Label text="âž• Create New Course" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #4a5568;">
                            <font>
                                <Font name="System Bold" size="16"/>
                            </font>
                        </Label>

                        <GridPane hgap="15" vgap="15">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                                <ColumnConstraints percentWidth="25"/>
                            </columnConstraints>

                            <TextField fx:id="courseCodeField" promptText="Course Code"
                                       style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                       GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <TextField fx:id="courseNameField" promptText="Course Name"
                                       style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                       GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                            <ComboBox fx:id="courseMajorCombo" promptText="Select Major"
                                      style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 5; -fx-font-size: 13px;"
                                      GridPane.columnIndex="2" GridPane.rowIndex="0" maxWidth="Infinity"/>
                            <TextField fx:id="courseLevelField" promptText="Level (1-4)"
                                       style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                       GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                            <TextField fx:id="courseLectureTimeField" promptText="Lecture Time"
                                       style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                       GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                            <ComboBox fx:id="courseInstructorCombo" promptText="Select Instructor"
                                      style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 5; -fx-font-size: 13px;"
                                      prefWidth="200" GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.columnSpan="2" maxWidth="Infinity"/>
                            <Button text="âœ“ Create Course" onAction="#handleCreateCourse"
                                    style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 8; -fx-font-size: 13px; -fx-padding: 10 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);"
                                    GridPane.columnIndex="3" GridPane.rowIndex="1" maxWidth="Infinity">
                                <font>
                                    <Font name="System Bold" size="13"/>
                                </font>
                            </Button>
                        </GridPane>
                    </VBox>

                    <!-- Courses Table -->
                    <VBox spacing="12" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 3);">
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ“‹ All Courses" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #4a5568;">
                                <font>
                                    <Font name="System Bold" size="16"/>
                                </font>
                            </Label>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸ”„ Refresh" onAction="#loadAllCourses"
                                    style="-fx-background-color: #e2e8f0; -fx-text-fill: #4a5568; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 18; -fx-font-size: 12px; -fx-font-weight: bold;">
                                <font>
                                    <Font name="System Bold" size="12"/>
                                </font>
                            </Button>
                            <Button text="ðŸ—‘ï¸ Delete Selected" onAction="#handleDeleteCourse"
                                    style="-fx-background-color: linear-gradient(to right, #f56565, #e53e3e); -fx-text-fill: white; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 18; -fx-font-size: 12px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(245,101,101,0.3), 5, 0, 0, 2);">
                                <font>
                                    <Font name="System Bold" size="12"/>
                                </font>
                            </Button>
                        </HBox>

                        <TableView fx:id="coursesTable" VBox.vgrow="ALWAYS"
                                   style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-border-width: 1;">
                            <columns>
                                <TableColumn fx:id="courseCodeColumn" text="Code" prefWidth="80" style="-fx-font-weight: bold;"/>
                                <TableColumn fx:id="courseNameColumn" text="Course Name" prefWidth="250"/>
                                <TableColumn fx:id="courseLevelColumn" text="Level" prefWidth="70"/>
                                <TableColumn fx:id="courseMajorColumn" text="Major" prefWidth="150"/>
                                <TableColumn fx:id="courseLectureTimeColumn" text="Lecture Time" prefWidth="180"/>
                                <TableColumn fx:id="courseInstructorColumn" text="Instructor" prefWidth="200"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- USERS TAB -->
            <Tab text="ðŸ‘¥ Users">
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: transparent;">

                    <Label text="ðŸ‘¥ User Management" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2d3748;">
                        <font>
                            <Font name="System Bold" size="22"/>
                        </font>
                    </Label>

                    <!-- Create User Form -->
                    <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 3);">
                        <Label text="âž• Create New User" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #4a5568;">
                            <font>
                                <Font name="System Bold" size="16"/>
                            </font>
                        </Label>

                        <!-- User Type Selection -->
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="User Type:" style="-fx-font-size: 13px; -fx-min-width: 90; -fx-text-fill: #4a5568; -fx-font-weight: bold;">
                                <font>
                                    <Font name="System Bold" size="13"/>
                                </font>
                            </Label>
                            <ComboBox fx:id="userTypeCombo" prefWidth="150"
                                      style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 5; -fx-font-size: 13px;"/>
                        </HBox>

                        <!-- Common Fields -->
                        <GridPane hgap="15" vgap="15">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="34"/>
                            </columnConstraints>

                            <TextField fx:id="userNameField" promptText="Full Name"
                                       style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                       GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <TextField fx:id="userEmailField" promptText="Email"
                                       style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                       GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                            <PasswordField fx:id="userPasswordField" promptText="Password"
                                           style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                           GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        </GridPane>

                        <!-- Dynamic Fields for Student -->
                        <GridPane fx:id="studentFieldsPane" hgap="15" vgap="15" visible="false" managed="false">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="33"/>
                                <ColumnConstraints percentWidth="34"/>
                            </columnConstraints>

                            <TextField fx:id="studentLevelField" promptText="Level (1-4)"
                                       style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 10; -fx-font-size: 13px;"
                                       GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <ComboBox fx:id="studentMajorCombo" promptText="Select Major"
                                      style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 5; -fx-font-size: 13px;"
                                      GridPane.columnIndex="1" GridPane.rowIndex="0" maxWidth="Infinity"/>
                            <ComboBox fx:id="studentDepartmentCombo" promptText="Department"
                                      style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 5; -fx-font-size: 13px;"
                                      GridPane.columnIndex="2" GridPane.rowIndex="0" maxWidth="Infinity"/>
                        </GridPane>

                        <!-- Dynamic Fields for Instructor -->
                        <HBox fx:id="instructorFieldsPane" spacing="12" visible="false" managed="false" alignment="CENTER_LEFT">
                            <Label text="Department:" style="-fx-font-size: 13px; -fx-min-width: 90; -fx-text-fill: #4a5568; -fx-font-weight: bold;">
                                <font>
                                    <Font name="System Bold" size="13"/>
                                </font>
                            </Label>
                            <ComboBox fx:id="instructorDepartmentCombo" promptText="Select Department" prefWidth="250"
                                      style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-padding: 5; -fx-font-size: 13px;"/>
                        </HBox>

                        <!-- Create Button -->
                        <HBox spacing="12" alignment="CENTER_RIGHT">
                            <Button text="âœ“ Create User" onAction="#handleCreateUser"
                                    style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 12 35; -fx-background-radius: 8; -fx-font-size: 14px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);">
                                <font>
                                    <Font name="System Bold" size="14"/>
                                </font>
                            </Button>
                        </HBox>
                    </VBox>

                    <!-- Users Table -->
                    <VBox spacing="12" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 3);">
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ“‹ All Users" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #4a5568;">
                                <font>
                                    <Font name="System Bold" size="16"/>
                                </font>
                            </Label>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸ”„ Refresh" onAction="#loadAllUsers"
                                    style="-fx-background-color: #e2e8f0; -fx-text-fill: #4a5568; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 18; -fx-font-size: 12px; -fx-font-weight: bold;">
                                <font>
                                    <Font name="System Bold" size="12"/>
                                </font>
                            </Button>
                            <Button text="ðŸ—‘ï¸ Delete Selected" onAction="#handleDeleteUser"
                                    style="-fx-background-color: linear-gradient(to right, #f56565, #e53e3e); -fx-text-fill: white; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 18; -fx-font-size: 12px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(245,101,101,0.3), 5, 0, 0, 2);">
                                <font>
                                    <Font name="System Bold" size="12"/>
                                </font>
                            </Button>
                        </HBox>

                        <TableView fx:id="usersTable" VBox.vgrow="ALWAYS"
                                   style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-border-width: 1;">
                            <columns>
                                <TableColumn fx:id="userIdColumn" text="ID" prefWidth="60" style="-fx-font-weight: bold;"/>
                                <TableColumn fx:id="userNameColumn" text="Name" prefWidth="300"/>
                                <TableColumn fx:id="userEmailColumn" text="Email" prefWidth="400"/>
                                <TableColumn fx:id="userRoleColumn" text="Role" prefWidth="180"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- STUDENTS TAB -->
            <Tab text="ðŸŽ“ Students">
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: transparent;">

                    <Label text="ðŸŽ“ Student Management" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2d3748;">
                        <font>
                            <Font name="System Bold" size="22"/>
                        </font>
                    </Label>

                    <!-- Students Table -->
                    <VBox spacing="12" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 3);">
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ“‹ All Students" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #4a5568;">
                                <font>
                                    <Font name="System Bold" size="16"/>
                                </font>
                            </Label>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸ”„ Refresh" onAction="#loadAllStudents"
                                    style="-fx-background-color: #e2e8f0; -fx-text-fill: #4a5568; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 18; -fx-font-size: 12px; -fx-font-weight: bold;">
                                <font>
                                    <Font name="System Bold" size="12"/>
                                </font>
                            </Button>
                            <Button text="ðŸ“ Update Level" onAction="#handleUpdateStudentLevel"
                                    style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-text-fill: white; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 18; -fx-font-size: 12px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);">
                                <font>
                                    <Font name="System Bold" size="12"/>
                                </font>
                            </Button>
                        </HBox>

                        <TableView fx:id="studentsTable" VBox.vgrow="ALWAYS"
                                   style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-border-width: 1;">
                            <columns>
                                <TableColumn fx:id="studentIdColumn" text="ID" prefWidth="60" style="-fx-font-weight: bold;"/>
                                <TableColumn fx:id="studentNameColumn" text="Name" prefWidth="350"/>
                                <TableColumn fx:id="studentEmailColumn" text="Email" prefWidth="450"/>
                                <TableColumn fx:id="studentLevelColumn" text="Level" prefWidth="180"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <!-- INSTRUCTORS TAB -->
            <Tab text="ðŸ‘¨â€ðŸ« Instructors">
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: transparent;">

                    <Label text="ðŸ‘¨â€ðŸ« Instructor Management" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2d3748;">
                        <font>
                            <Font name="System Bold" size="22"/>
                        </font>
                    </Label>

                    <!-- Instructors Table -->
                    <VBox spacing="12" VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 15, 0, 0, 3);">
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ“‹ All Instructors" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #4a5568;">
                                <font>
                                    <Font name="System Bold" size="16"/>
                                </font>
                            </Label>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸ”„ Refresh" onAction="#loadAllInstructors"
                                    style="-fx-background-color: #e2e8f0; -fx-text-fill: #4a5568; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 18; -fx-font-size: 12px; -fx-font-weight: bold;">
                                <font>
                                    <Font name="System Bold" size="12"/>
                                </font>
                            </Button>
                        </HBox>

                        <TableView fx:id="instructorsTable" VBox.vgrow="ALWAYS"
                                   style="-fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-border-width: 1;">
                            <columns>
                                <TableColumn fx:id="instructorIdColumn" text="ID" prefWidth="60" style="-fx-font-weight: bold;"/>
                                <TableColumn fx:id="instructorNameColumn" text="Name" prefWidth="350"/>
                                <TableColumn fx:id="instructorEmailColumn" text="Email" prefWidth="450"/>
                                <TableColumn fx:id="instructorDeptColumn" text="Department" prefWidth="240"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>

